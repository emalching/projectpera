(function(){var e=angular.module("peraApp",["ngRoute","xeditable"]);e.run(function(e,r){e.theme="bs3"});function r(e,r){e.when("/",{templateUrl:"/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/profile/:cardNumber",{templateUrl:"/profile/profile.view.html",controller:"profileCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});r.html5Mode({enabled:true,requireBase:false})}angular.module("peraApp").config(["$routeProvider","$locationProvider",r])})();(function(){angular.module("peraApp").controller("loginCtrl",e);e.$inject=["$location","authentication"];function e(e,r){var t=this;t.pageHeader={title:"Sign in to Loc8r"};t.credentials={email:"",password:""};t.returnPage=e.search().page||"/";t.onSubmit=function(){t.formError="";if(!t.credentials.email||!t.credentials.password){t.formError="All fields required, please try again";return false}else{t.doLogin()}};t.doLogin=function(){t.formError="";r.login(t.credentials).error(function(e){t.formError=e}).then(function(){})}}})();(function(){angular.module("peraApp").controller("profileCtrl",e);e.$inject=["$scope","$routeParams","staffData"];function e(e,r,t){var a=this;a.cardNumber=r.cardNumber;a.pageHeader={title:"User Profile"};a.message="Loading your user profile...";t.getStaffByCardNumber(a.cardNumber).success(function(e){a.message=e.cardNumber!=""?"":"User Profile not found.";a.data={staff:e};if(!a.data.staff.employeeName){a.data.staff.employeeName=a.data.staff.firstName+" "+a.data.staff.lastName}}).error(function(e){a.message="Sorry, something's gone wrong, please try again later."});e.updateProfile=function(){t.updateStaffByCardNumber(a.cardNumber,{employeeName:a.data.staff.employeeName,projectName:a.data.staff.projectName,department:a.data.staff.department,position:a.data.staff.position,teamLeadName:a.data.staff.teamLeadName,emailAddress:a.data.staff.emailAddress}).success(function(e){}).error(function(e){a.formError="Your profile has not been updated, please try again."});return false}}})();(function(){angular.module("peraApp").service("authentication",e);e.$inject=["$http","$window"];function e(e,r){login=function(r){return e.post("/api/login",r).success(function(e){})};return{login:login}}})();(function(){angular.module("peraApp").service("staffData",e);e.$inject=["$http"];function e(e){var r=function(r){return e.get("/api/profile/"+r)};var t=function(r,t){return e.put("/api/profile/"+r,t)};return{getStaffByCardNumber:r,updateStaffByCardNumber:t}}})();(function(){angular.module("peraApp").directive("footerGeneric",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric/footerGeneric.template.html"}}})();(function(){angular.module("peraApp").directive("navigation",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html",controller:"navigationCtrl",controllerAs:"navvm"}}})();(function(){angular.module("peraApp").directive("pageHeader",e);function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}}})();