<navigation></navigation>

<div class="container">
  <page-header content="vm.pageHeader"></page-header>
  
  <h3>{{ vm.message }}</h3>
  
  <form editable-form name="profileForm" id="profileForm" class="form-horizontal" role="form" onaftersave="updateProfile()" ng-show="vm.message == ''">

    <div role="alert" ng-show="vm.formError || vm.loadError " class="alert alert-danger"><strong>Error! </strong>{{ vm.formError || vm.loadError }}</div>
    
    <div ng-show="vm.loadError == ''">
      <div class="form-group">
        <label class="col-sm-2 control-label">Card Number</label>
        <div class="col-sm-10">
          <label class="control-label" e-name="cardNumber" e-ng-readonly="true" editable-text="vm.data.staff.cardNumber">{{ vm.data.staff.cardNumber || 'Card Number' }}</label>
        </div>
      </div>
      
      <div class="form-group">
        <label class="col-sm-2 control-label">Employee Name</label>
        <div class="col-sm-10">
          <label class="control-label" editable-text="vm.data.staff.employeeName" e-name="name" onbeforesave="isEmpty('Employee Name', $data)">{{ vm.data.staff.employeeName || 'Employee Name' }}</label>
        </div>
      </div>
      
      <div class="form-group">
        <label class="col-sm-2 control-label">Email Address</label>
        <div class="col-sm-10">
          <label class="control-label" e-name="emailAddress" e-ng-readonly="true" editable-text="vm.data.staff.userInfo[0].emailAddress">{{ vm.data.staff.userInfo[0].emailAddress || 'Email Address' }}</label>
        </div>
      </div>
      
      <div class="form-group">
        <label class="col-sm-2 control-label">Project Name</label>
        <div class="col-sm-10">
          <label class="control-label" editable-text="vm.data.staff.project" e-name="projectName" onbeforesave="isEmpty('Project Name', $data)" e-for="projectName">{{ vm.data.staff.project || 'Project Name' }}</label>
        </div>
      </div>
      
      <div class="form-group">
        <label class="col-sm-2 control-label">Department</label>
        <div class="col-sm-10">
          <label class="control-label" editable-text="vm.data.staff.department" e-name="department" onbeforesave="isEmpty('Department', $data)">{{ vm.data.staff.department || 'Department' }}</label>
        </div>
      </div>
      
      <div class="form-group">
        <label class="col-sm-2 control-label">Position</label>
        <div class="col-sm-10">
          <label class="control-label" editable-text="vm.data.staff.position" e-name="position" onbeforesave="isEmpty('Position', $data)">{{ vm.data.staff.position || 'Position' }}</label>
        </div>
      </div>
      
      <div class="form-group">
        <label class="col-sm-2 control-label">Team Lead Name</label>
        <div class="col-sm-10">
          <label class="control-label" editable-ui-select="vm.data.staff.teamLeadName" e-name="vm.data.staff.teamLeadName" ng-model="vm.data.staff.teamLeadName" e-style="width: 100%" onbeforesave="isEmpty('Team Lead Name', $data)">
            {{ vm.data.staff.teamLeadName || 'Team Lead Name' }}
            <editable-ui-select-match>{{ $select.selected.displayName }}</editable-ui-select-match>
            <editable-ui-select-choices repeat="user.displayName as user in vm.users | propsFilter: { displayName: $select.search, emailAddress: $select.search }" position='auto'>
              <div ng-bind-html="user.displayName | highlight: $select.search"></div>
              <small>
                email: <span ng-bind-html="''+user.emailAddress | highlight: $select.search"></span>
              </small>
            </editable-ui-select-choices>
          </label>
        </div>
      </div>
    </div>
    
    <div class="modal-footer">
      <button type="button" class="btn btn-default" ng-click="vm.goBack()" ng-show="!profileForm.$visible">Back</button>
      <button type="button" class="btn btn-default" ng-click="profileForm.$show()" ng-show="!profileForm.$visible" ng-disabled="vm.loadError != ''">Edit</button>
      <span ng-show="profileForm.$visible">
        <button type="submit" class="btn btn-primary" ng-disabled="profileForm.$waiting">Save</button>
        <button type="button" class="btn btn-default" ng-disabled="profileForm.$waiting" ng-click="profileForm.$cancel()">Cancel</button>
      </span>
    </div>

  </form>
  
  <footer-generic></footer-generic>
</div>